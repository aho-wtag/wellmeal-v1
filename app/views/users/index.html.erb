<!--<h1>Users#index</h1>-->
<!--<p>Find me in app/views/users/index.html.erb</p>-->
<!--only admin can view, edit, update, delete-->
<h1>This is the user index page</h1>
<%if can? :create, User %>
<p>
  <%= link_to 'create new user', new_user_path %>
</p>
<%end %>
<table class="table">
  <tr>
    <th>User ID</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
    <th>phone</th>
    <th>Role</th>
  </tr>
  <% @users.each do |user| %>
    <tr>
      <%if can? :read, user %>
      <td><%= user.id %></td>
      <td><%= user.first_name %></td>
      <td><%= user.last_name %></td>
      <td><%= user.email %></td>
      <td><%= user.phone %></td>
      <td><%= user.role %></td>
      <td><%=link_to'edit', edit_user_path(user) %></td>
      <td><%=link_to'show', user_path(user) %></td>
        <%end %>
      <%if can? :destroy, User %>
      <td> <%= link_to "delete", user_path(user), data: { turbo_method: :delete, turbo_confirm: "Are you sure?"} %> </td>
      <%end %>
    </tr>


  <% end %>
</table>